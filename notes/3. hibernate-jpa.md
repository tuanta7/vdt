# Hibernate & JPA

## 1. What is Hibernate & JPA

- Hibernate is an open-source object-relational mapping (ORM) framework for Java. It provides a convenient way to map Java objects to relational database tables and perform database operations using object-oriented concepts.
- Hibernate uses JDBC to interact with the database. Hibernate generates the SQL queries required to perform database operations and executes them using JDBC.
- JPA (Java Persistence API) is a specification that defines a standard set of interfaces and annotations for ORM in Java applications. No, actually Hibernate was created before the Java Persistence API (JPA). **After JPA was introduced, Hibernate adapted its system to become a full-fledged JPA provider**. Hibernate is one of the popular implementations of the JPA specification.

Together, Hibernate and JPA provide a powerful and efficient way to work with databases in Java applications.

## 2. JPA Annotations

| Annotation                 | Description                                                                   |
| -------------------------- | ----------------------------------------------------------------------------- |
| @Entity                    |                                                                               |
| @Table                     |                                                                               |
| @Id                        | specifies the primary key of an entity.                                       |
| @GeneratedValue            | provides the specification for primary key generation strategies              |
| @Column                    | specify the mapped column for a persistent property or field                  |
| @OneToOne                  |                                                                               |
| @OneToMany                 |                                                                               |
| @ManyToOne                 |                                                                               |
| @ManyToMany                |                                                                               |
| @JoinColumn                | specifies the foreign key column                                              |
| @JoinTable                 | used in many-to-many relationships to specify the join table                  |
| @Embedded                  | specify a class whose fields are to be embedded into the entity               |
| @Embeddable                | specify that a class is intended to be embedded in other entities             |
| @PrePersist & @PostPersist | callback methods that should be invoked before & after an entity is persisted |
| -                          | -                                                                             |

## 3. Entity Class

- Annotated wih @Entity
- Must have a public (or protected) no argument constructor

### ID Generation Strategies

| Strategies              | Description                                                                                                         |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------- |
| GenerationType.AUTO     | (default) allows the persistence provider (Hibernate) to choose an appropriate strategy for the particular database |
| GenerationType.IDENTITY | relies on the database to generate the primary key value (auto-increment).                                          |
| GenerationType.SEQUENCE | uses a database sequence to generate unique primary key values                                                      |
| GenerationType.TABLE    | uses a special table in the database to generate primary key values (least efficient)                               |

Custom Generation Strategies

- Implement `org.hibernate.id.IdentifierGenerator`
- Override the public method `Serializable generate(...)`

## 4. Repository class - DAO

### EntityManager

- EntityManager is a key interface in the Java Persistence API (JPA) used for interacting with the persistence context.
- It acts as a bridge between your application code and the underlying database.
- EntityManager manages the lifecycle of entities, performs CRUD operations, and executes queries.

### JpaRepository (Interface)

- JpaRepository is a part of Spring Data JPA
- It provides a way to interact with the database in a more object-oriented manner, abstracting away much of the boilerplate code typically required for data access layers.
- It extends the `CrudRepository` and `PagingAndSortingRepository` interfaces, adding JPA-specific methods for data access and manipulation.
